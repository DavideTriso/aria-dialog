!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):e(jQuery,window,document)}(function(d,e,t){"use strict";var r="ariaDialog",a=0,o="role",l="aria-modal",c="aria-hidden",f="aria-labelledby",u="aria-describedby",g="tabindex",m="true",h="false",p=d(e);function w(e,t,n){return n=void 0!==n?n:"",e.is("[id]")||e.attr("id",t+n),e.attr("id")}function y(e){return e.shiftKey||e.ctrlKey||e.altKey||e.metaKey?!(!e.shiftKey||e.ctrlKey||e.altKey||e.metaKey)&&"shift":"none"}function C(e){return e.find("a[href], area[href], button:enabled, input:enabled, textarea:enabled, select:enabled, optgroup:enabled, option:enabled, menuitem:enabled, fieldset:enabled")}function n(e,t){var n=this;n.settings=d.extend({},d.fn[r].defaultSettings,t),n.element=d(e),n.elementId=w(n.element,n.settings.dialogIdPrefix,a),n.elementState=!1,n.elements={dialogWindow:n.element.find("."+n.settings.windowClass),container:n.element.find("."+n.settings.containerClass),heading:n.element.find("."+n.settings.headingClass),mainMessage:n.element.find("."+n.settings.mainMessageClass).first()},n.init()}d.extend(n.prototype,{init:function(){var e=this,t=e.settings,n=e.element,i=e.elements,s=i.dialogWindow;switch(t.cssTransitions||(n.hide(),s.hide()),t.dialogType){case"modal":s.attr(o,"dialog").attr(l,m);break;case"alert":s.attr(o,"alertdialog").attr(l,m)}if(s.attr(f,w(i.heading,e.elementId+"__heading")).attr(c,m).attr(g,"-1"),1===i.mainMessage.length&&s.attr(u,w(i.mainMessage,e.elementId+"__main-message")),i.focussableElements=C(s),i.elementToFocus=s.find(t.setFocusOn),"object"!=typeof i.elementToFocus||1!==i.elementToFocus.length||1!==i.elementToFocus.closest(e.element).length||i.focussableElements.index(i.elementToFocus)<0)throw new Error("Check value of 'setFocusOn' option.");p.trigger(r+".initialised",[e]),a+=1},show:function(){var t=this,e=t.element,n=t.elements,i=n.dialogWindow,s=t.settings,a=C(i),o=a.first(),l=a.last();t.elementWithFocus=d(":focus"),s.cssTransitions||(e.show(),i.stop().fadeIn(s.fadeSpeed)),e.addClass(s.dialogOpenClass),i.addClass(s.windowOpenClass).attr(c,h),n.elementToFocus.focus(),o.on("keydown."+r,function(e){9===e.keyCode&&"shift"===y(e)&&(e.preventDefault(),l.focus())}),l.first().on("keydown."+r,function(e){9===e.keyCode&&"none"===y(e)&&(e.preventDefault(),o.focus())}),s.closeWithEsc&&p.on("keydown."+r,function(e){27===e.keyCode&&"none"===y(e)&&t.hide()}),s.closeOnBgClick&&(e.on("click."+r,function(){t.hide()}),i.on("click."+r,function(e){e.stopPropagation()})),t.elementState=!0,p.trigger(r+".show",[t])},hide:function(){var e=this,t=e.element,n=e.elements.dialogWindow,i=e.settings;t.removeClass(i.dialogOpenClass),n.removeClass(i.windowOpenClass).attr(c,m),i.cssTransitions||n.stop().fadeOut(i.fadeSpeed,function(){t.hide()}),1===e.elementWithFocus.length&&e.elementWithFocus.focus(),p.off("keydown."+r),t.off("click."+r),n.off("click."+r),e.elementState=!1,p.trigger(r+".hide",[e])},methodCaller:function(e){var t=this;switch(e){case"show":t.show();break;case"hide":t.elementState&&t.hide()}}}),d.fn[r]=function(e){return this.each(function(){d.data(this,"plugin_"+r)||"object"!=typeof e&&void 0!==e?"string"==typeof e&&d.data(this,"plugin_"+r).methodCaller(e):d.data(this,"plugin_"+r,new n(this,e))})},d.fn[r].defaultSettings={dialogIdPrefix:"dialog--",windowClass:"dialog__window",containerClass:"dialog__container",headingClass:"dialog__heading",mainMessageClass:"dialog__main-message",dialogOpenClass:"dialog_open",windowOpenClass:"dialog__window_open",dialogType:"modal",containerRole:"document",closeWithEsc:!0,closeOnBgClick:!0,fadeSpeed:600,cssTransitions:!1,setFocusOn:"button:first-child"}});