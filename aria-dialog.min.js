!function(a){"use strict";function n(a,e,i){a.is("[id]")||a.attr("id",e+(i+1))}function l(a){return a.shiftKey||a.ctrlKey||a.altKey||a.metaKey?!1:!0}var e={},i=0,o="",t=a("body"),r={r:"role",aHi:"aria-hidden",aLab:"aria-labelledby",tbI:"tabindex",aLi:"aria-live",t:"true",f:"false"};e.init=function(e,o){var t=a.extend({},a.fn.ariaDialog.defaultSettings,e),l={dialog:o,wrapper:o.find("."+t.dialogWrapperClass),container:o.find("."+t.dialogContainerClass),heading:o.find("."+t.dialogHeadingClass)},s="",d=[];switch(n(l.dialog,"dialog-",i),s=l.dialog.attr("id"),d=[s,l,t],o.data("dialogArray",d),t.cssTransitions||(l.dialog.hide(),l.wrapper.css({opacity:0})),t.dialogType){case"modal":l.wrapper.attr(r.r,"dialog");break;case"alert":l.wrapper.attr(r.r,"alertdialog")}l.container.attr(r.r,t.dialogContainerRole),n(l.heading,"dialog-heading-",i),l.wrapper.attr(r.aLab,l.heading.attr("id")),l.wrapper.attr(r.tbI,"0").attr(r.aHi,r.t),i+=1},e.open=function(i){var i=i.data("dialogArray")[1].dialog,n=i.data("dialogArray")[1].wrapper,s=i.data("dialogArray")[2],d=i.find("a[href], area[href], button:enabled, input:enabled, textarea:enabled, select:enabled, optgroup:enabled, option:enabled, menuitem:enabled, fieldset:enabled");d={first:d.first(),last:d.last()},o=a(":focus"),s.preventScroll&&t.addClass("aria-dialog_no-scroll"),i.addClass(s.dialogOpenClass),n.addClass(s.dialogWrapperOpenClass).attr(r.aHi,r.f).focus(),s.cssTransitions||(i.show(),n.fadeTo(s.fadeSpeed,1)),d.last.off("keydown").on("keydown",function(a){9===a.keyCode&&l(a)===!0&&(a.preventDefault(),d.first.focus())}),d.first.off("keydown").on("keydown",function(a){9!==a.keyCode||!a.shiftKey||a.ctrlKey||a.altKey||a.metaKey||(a.preventDefault(),d.last.focus())}),s.closeWithEsc&&a(window).one("keydown",function(a){27===a.keyCode&&l(a)===!0&&e.close(i)}),s.closeOnBgClick&&(i.on("click",function(a){e.close(i)}),n.on("click",function(a){a.stopPropagation()}))},e.close=function(a){var a=a.data("dialogArray")[1].dialog,e=a.data("dialogArray")[1].wrapper,i=a.data("dialogArray")[2];i.preventScroll&&t.removeClass("aria-dialog_no-scroll"),a.removeClass(i.dialogOpenClass),e.removeClass(i.dialogWrapperOpenClass).attr(r.aHi,r.t).focus(),""!==o&&o.focus(),i.cssTransitions||e.fadeOut(i.fadeSpeed,function(){a.hide()})},e.remove=function(a){a.remove()},e.destroy=function(a){var e=a.data("dialogArray")[1].wrapper;a.removeData("dialogArray"),e.removeAttr(r.r).removeAttr(r.aLi).removeAttr(r.tbI).removeAttr(r.aHi)},a.fn.ariaDialog=function(i){if("object"==typeof i||"undefined"==typeof i)return void this.each(function(){e.init(i,a(this))});switch(i){case"open":e.open(a(this[0]));break;case"close":e.close(a(this[0]));break;case"remove":this.each(function(){e.remove(a(this))});break;case"destroy":this.each(function(){e.destroy(a(this))})}},a.fn.ariaDialog.defaultSettings={dialogClass:"dialog",dialogWrapperClass:"dialog__wrapper",dialogContainerClass:"dialog__container",dialogHeadingClass:"dialog__heading",dialogOpenClass:"dialog_open",dialogWrapperOpenClass:"dialog__wrapper_open",dialogType:"modal",dialogContainerRole:"document",closeWithEsc:!1,closeOnBgClick:!1,fadeSpeed:100,cssTransitions:!1,preventScroll:!0}}(jQuery);