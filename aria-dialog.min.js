!function(e){"use strict";function n(e,a,t){e.is("[id]")||e.attr("id",a+(t+1))}function d(e){var t=0,i=a.length,r=0,o=e.attr("id");for(t;i>t;t+=1)a[t][0]===o&&(r=t);return r}function l(a,t){var i=t.top===!1?e(window).outerHeight()/2-a.outerHeight()/2:t.top,r=t.left===!1?e(window).outerWidth()/2-a.outerWidth()/2:t.left;a.css({left:r,top:i})}function f(e){return e.shiftKey||e.ctrlKey||e.altKey||e.metaKey?!1:!0}var a=[],t={},i=0,r="",o={r:"role",aHi:"aria-hidden",aLab:"aria-labelledby",tbI:"tabindex",aLi:"aria-live",t:"true",f:"false"};t.init=function(t,r){var d=e.extend({dialogClass:"dialog",dialogWrapperClass:"dialog__wrapper",dialogHeadingClass:"dialog__heading",dialogType:"modal",closeWithEsc:!1,top:!1,left:!1,zIndex:100,fadeSpeed:100},t),l={dialog:r,wrapper:r.find("."+d.dialogWrapperClass),heading:r.find("."+d.dialogHeadingClass)},f="",s=[];switch(n(l.dialog,"dialog-",i),f=l.dialog.attr("id"),s=[f,l,d],a.push(s),l.dialog.hide().css({"z-index":d.zIndex}),l.wrapper.css({opacity:0}),d.dialogType){case"modal":l.wrapper.attr(o.r,"dialog");break;case"alert":l.wrapper.attr(o.r,"alertdialog")}n(l.heading,"dialog-heading-",i),l.wrapper.attr(o.aLab,l.heading.attr("id")),l.wrapper.attr(o.tbI,"0").attr(o.aHi,o.t),i+=1},t.open=function(i){var n=d(i),s=i.find("a[href], area[href], button:enabled, input:enabled, textarea:enabled, select:enabled, optgroup:enabled, option:enabled, menuitem:enabled, fieldset:enabled");s={first:s.first(),last:s.last()},r=e(":focus"),a[n][1].dialog.show(),l(a[n][1].wrapper,a[n][2]),e(window).on("resize",function(){l(a[n][1].wrapper,a[n][2])}),a[n][1].wrapper.fadeTo(a[n][2].fadeSpeed,1),a[n][1].wrapper.attr(o.aHi,o.f),a[n][1].wrapper.focus(),s.last.unbind("keydown").on("keydown",function(e){9===e.keyCode&&f(e)===!0&&(e.preventDefault(),s.first.focus())}),s.first.unbind("keydown").on("keydown",function(e){9!==e.keyCode||!e.shiftKey||e.ctrlKey||e.altKey||e.metaKey||(e.preventDefault(),s.last.focus())}),a[n][2].closeWithEsc&&e(window).unbind("keydown").one("keydown",function(e){27===e.keyCode&&f(e)===!0&&t.close(i)})},t.close=function(e){var t=d(e);a[t][1].wrapper.fadeOut(a[t][2].fadeSpeed,function(){a[t][1].dialog.hide(),""!==r&&r.focus()}),a[t][1].wrapper.attr(o.aHi,o.t)},t.remove=function(e){var t=d(e);a.splice(t,1),e.remove()},t.destroy=function(e){var t=d(e);a.splice(t,1),a[t][1].wrapper.removeAttr(o.r).removeAttr(o.aLi).removeAttr(o.tbI).removeAttr(o.aHi)},e.fn.ariaDialog=function(a){("object"==typeof a||"undefined"==typeof a)&&this.each(function(){t.init(a,e(this))}),"open"===a&&t.open(e(this)),"close"===a&&t.close(e(this)),"remove"===a&&this.each(function(){t.remove(e(this))}),"destroy"===a&&this.each(function(){t.destroy(e(this))})}}(jQuery);