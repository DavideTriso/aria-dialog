!function(e){"use strict";function r(e,a,t){e.is("[id]")||e.attr("id",a+(t+1))}function d(e){var t=0,i=a.length,o=0,n=e.attr("id");for(t;i>t;t+=1)a[t][0]===n&&(o=t);return o}function l(a,t){var i=t.top===!1?e(window).outerHeight()/2-a.outerHeight()/2:t.top,o=t.left===!1?e(window).outerWidth()/2-a.outerWidth()/2:t.left;a.css({left:o,top:i})}function f(e){return e.shiftKey||e.ctrlKey||e.altKey||e.metaKey?!1:!0}var a=[],t={},i=0,o="",n={r:"role",aHi:"aria-hidden",aLab:"aria-labelledby",tbI:"tabindex",aLi:"aria-live",t:"true",f:"false"};t.init=function(t,o){var d=e.extend({dialogClass:"dialog",dialogWrapperClass:"dialog__wrapper",dialogContainerClass:"dialog__container",dialogHeadingClass:"dialog__heading",dialogType:"modal",dialogContainerRole:"document",closeWithEsc:!1,top:!1,left:!1,zIndex:100,fadeSpeed:100},t),l={dialog:o,wrapper:o.find("."+d.dialogWrapperClass),container:o.find("."+d.dialogContainerClass),heading:o.find("."+d.dialogHeadingClass)},f="",s=[];switch(r(l.dialog,"dialog-",i),f=l.dialog.attr("id"),s=[f,l,d],a.push(s),l.dialog.hide().css({"z-index":d.zIndex}),l.wrapper.css({opacity:0}),d.dialogType){case"modal":l.wrapper.attr(n.r,"dialog");break;case"alert":l.wrapper.attr(n.r,"alertdialog")}l.container.attr(n.r,d.dialogContainerRole),r(l.heading,"dialog-heading-",i),l.wrapper.attr(n.aLab,l.heading.attr("id")),l.wrapper.attr(n.tbI,"0").attr(n.aHi,n.t),i+=1},t.open=function(i){var r=d(i),i=a[r][1].dialog,s=a[r][1].wrapper,c=i.find("a[href], area[href], button:enabled, input:enabled, textarea:enabled, select:enabled, optgroup:enabled, option:enabled, menuitem:enabled, fieldset:enabled");c={first:c.first(),last:c.last()},o=e(":focus"),i.show(),l(s,a[r][2]),e(window).on("resize",function(){l(s,a[r][2])}),s.fadeTo(a[r][2].fadeSpeed,1).attr(n.aHi,n.f),s.focus(),c.last.unbind("keydown").on("keydown",function(e){9===e.keyCode&&f(e)===!0&&(e.preventDefault(),c.first.focus())}),c.first.unbind("keydown").on("keydown",function(e){9!==e.keyCode||!e.shiftKey||e.ctrlKey||e.altKey||e.metaKey||(e.preventDefault(),c.last.focus())}),a[r][2].closeWithEsc&&e(window).unbind("keydown").one("keydown",function(e){27===e.keyCode&&f(e)===!0&&t.close(i)})},t.close=function(e){var t=d(e),e=a[t][1].dialog,i=a[t][1].wrapper;i.attr(n.aHi,n.t).fadeOut(a[t][2].fadeSpeed,function(){e.hide(),""!==o&&o.focus()})},t.remove=function(e){var t=d(e);a.splice(t,1),e.remove()},t.destroy=function(e){var t=d(e),i=a[t][1].wrapper;a.splice(t,1),i.removeAttr(n.r).removeAttr(n.aLi).removeAttr(n.tbI).removeAttr(n.aHi)},e.fn.ariaDialog=function(a){("object"==typeof a||"undefined"==typeof a)&&this.each(function(){t.init(a,e(this))}),"open"===a&&t.open(e(this)),"close"===a&&t.close(e(this)),"remove"===a&&this.each(function(){t.remove(e(this))}),"destroy"===a&&this.each(function(){t.destroy(e(this))})}}(jQuery);