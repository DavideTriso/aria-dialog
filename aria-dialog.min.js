!function(e){"use strict";function o(e,a,t){e.is("[id]")||e.attr("id",a+(t+1))}function d(e){var t=0,i=a.length,r=0,n=e.attr("id");for(t;i>t;t+=1)a[t][0]===n&&(r=t);return r}function l(e){return e.shiftKey||e.ctrlKey||e.altKey||e.metaKey?!1:!0}var a=[],t={},i=0,r="",n={r:"role",aHi:"aria-hidden",aLab:"aria-labelledby",tbI:"tabindex",aLi:"aria-live",t:"true",f:"false"};t.init=function(t,r){var d=e.extend({dialogClass:"dialog",dialogWrapperClass:"dialog__wrapper",dialogContainerClass:"dialog__container",dialogHeadingClass:"dialog__heading",dialogType:"modal",dialogContainerRole:"document",closeWithEsc:!1,zIndex:100,fadeSpeed:100},t),l={dialog:r,wrapper:r.find("."+d.dialogWrapperClass),container:r.find("."+d.dialogContainerClass),heading:r.find("."+d.dialogHeadingClass)},s="",f=[];switch(o(l.dialog,"dialog-",i),s=l.dialog.attr("id"),f=[s,l,d],a.push(f),l.dialog.hide().css({"z-index":d.zIndex}),l.wrapper.css({opacity:0}),d.dialogType){case"modal":l.wrapper.attr(n.r,"dialog");break;case"alert":l.wrapper.attr(n.r,"alertdialog")}l.container.attr(n.r,d.dialogContainerRole),o(l.heading,"dialog-heading-",i),l.wrapper.attr(n.aLab,l.heading.attr("id")),l.wrapper.attr(n.tbI,"0").attr(n.aHi,n.t),i+=1},t.open=function(i){var o=d(i),i=a[o][1].dialog,s=a[o][1].wrapper,f=i.find("a[href], area[href], button:enabled, input:enabled, textarea:enabled, select:enabled, optgroup:enabled, option:enabled, menuitem:enabled, fieldset:enabled");f={first:f.first(),last:f.last()},r=e(":focus"),i.show(),s.fadeTo(a[o][2].fadeSpeed,1).attr(n.aHi,n.f).focus(),f.last.unbind("keydown").on("keydown",function(e){9===e.keyCode&&l(e)===!0&&(e.preventDefault(),f.first.focus())}),f.first.unbind("keydown").on("keydown",function(e){9!==e.keyCode||!e.shiftKey||e.ctrlKey||e.altKey||e.metaKey||(e.preventDefault(),f.last.focus())}),a[o][2].closeWithEsc&&e(window).unbind("keydown").one("keydown",function(e){27===e.keyCode&&l(e)===!0&&t.close(i)})},t.close=function(e){var t=d(e),e=a[t][1].dialog,i=a[t][1].wrapper;i.attr(n.aHi,n.t).fadeOut(a[t][2].fadeSpeed,function(){e.hide(),""!==r&&r.focus()})},t.remove=function(e){var t=d(e);a.splice(t,1),e.remove()},t.destroy=function(e){var t=d(e),i=a[t][1].wrapper;a.splice(t,1),i.removeAttr(n.r).removeAttr(n.aLi).removeAttr(n.tbI).removeAttr(n.aHi)},e.fn.ariaDialog=function(a){if("object"==typeof a||"undefined"==typeof a)return void this.each(function(){t.init(a,e(this))});switch(a){case"open":t.open(e(this));break;case"close":t.close(e(this));break;case"remove":this.each(function(){t.remove(e(this))});break;case"destroy":this.each(function(){t.destroy(e(this))})}}}(jQuery);