!function(a){"use strict";function t(a,e,c){a.is("[id]")||a.attr("id",e+(c+1))}function s(a){var c=0,n=e.length,o=0,i=a.attr("id");for(c;n>c;c+=1)e[c][0]===i&&(o=c);return o}function d(e,c){var n=c.top===!1?a(window).outerHeight()/2-e.outerHeight()/2:c.top,o=c.left===!1?a(window).outerWidth()/2-e.outerWidth()/2:c.left;e.css({left:o,top:n})}function r(a){return a.shiftKey||a.ctrlKey||a.altKey||a.metaKey?!1:!0}var e=[],c={},n=0,o="",i={r:"role",aHi:"aria-hidden",aLab:"aria-labelledby",tbI:"tabindex",aLi:"aria-live",t:"true",f:"false"};c.init=function(c,o){var s=a.extend({dialogClass:"dialog",dialogWrapperClass:"dialog__wrapper",dialogHeadingClass:"dialog__heading",dialogType:"modal",closeWithEsc:!1,top:!1,left:!1,zIndex:100,fadeSpeed:100},c),d={dialog:o,wrapper:o.find("."+s.dialogWrapperClass),heading:o.find("."+s.dialogHeadingClass)},r="",l=[];switch(t(d.dialog,"dialog-",n),r=d.dialog.attr("id"),l=[r,d,s],e.push(l),d.dialog.hide().css({"z-index":s.zIndex}),d.wrapper.css({opacity:0}),s.dialogType){case"modal":d.wrapper.attr(i.r,"dialog");break;case"alert":d.wrapper.attr(i.r,"alertdialog")}t(d.heading,"dialog-heading-",n),d.wrapper.attr(i.aLab,d.heading.attr("id")),d.wrapper.attr(i.tbI,"0").attr(i.aHi,i.t),n+=1},c.open=function(n){var t=s(n),n=e[t][1].dialog,l=e[t][1].wrapper,f=n.find("a[href], area[href], button:enabled, input:enabled, textarea:enabled, select:enabled, optgroup:enabled, option:enabled, menuitem:enabled, fieldset:enabled");f={first:f.first(),last:f.last()},o=a(":focus"),n.show(),d(l,e[t][2]),a(window).on("resize",function(){d(l,e[t][2])}),l.fadeTo(e[t][2].fadeSpeed,1).attr(i.aHi,i.f),l.focus(),f.last.unbind("keydown").on("keydown",function(a){9===a.keyCode&&r(a)===!0&&(a.preventDefault(),f.first.focus())}),f.first.unbind("keydown").on("keydown",function(a){9!==a.keyCode||!a.shiftKey||a.ctrlKey||a.altKey||a.metaKey||(a.preventDefault(),f.last.focus())}),e[t][2].closeWithEsc&&a(window).unbind("keydown").one("keydown",function(a){27===a.keyCode&&r(a)===!0&&c.close(n)})},c.close=function(a){var c=s(a),a=e[c][1].dialog,n=e[c][1].wrapper;n.attr(i.aHi,i.t).fadeOut(e[c][2].fadeSpeed,function(){a.hide(),""!==o&&o.focus()})},c.remove=function(a){var c=s(a);e.splice(c,1),a.remove()},c.destroy=function(a){var c=s(a),n=e[c][1].wrapper;e.splice(c,1),n.removeAttr(i.r).removeAttr(i.aLi).removeAttr(i.tbI).removeAttr(i.aHi)},a.fn.ariaDialog=function(e){("object"==typeof e||"undefined"==typeof e)&&this.each(function(){c.init(e,a(this))}),"open"===e&&c.open(a(this)),"close"===e&&c.close(a(this)),"remove"===e&&this.each(function(){c.remove(a(this))}),"destroy"===e&&this.each(function(){c.destroy(a(this))})}}(jQuery);