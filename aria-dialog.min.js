!function(e){"use strict";function n(e,t,a){e.is("[id]")||e.attr("id",t+(a+1))}function d(e){var a=0,i=t.length,r=0,o=e.attr("id");for(a;i>a;a+=1)t[a][0]===o&&(r=a);return r}function l(t,a){var i=a.top===!1?e(window).outerHeight()/2-t.outerHeight()/2:a.top,r=a.left===!1?e(window).outerWidth()/2-t.outerWidth()/2:a.left;t.css({left:r,top:i})}function f(e){return e.shiftKey||e.ctrlKey||e.altKey||e.metaKey?!1:!0}var t=[],a={},i=0,r="",o={r:"role",aHi:"aria-hidden",aLab:"aria-labelledby",tbI:"tabindex",aLi:"aria-live",t:"true",f:"false"};a.init=function(a,r){var d=e.extend({dialogClass:"dialog",dialogWrapperClass:"dialog__wrapper",dialogHeadingClass:"dialog__heading",dialogType:"modal",closeWithEsc:!1,top:!1,left:!1,zIndex:100,fadeSpeed:100},a),l={dialog:r,wrapper:r.find("."+d.dialogWrapperClass),heading:r.find("."+d.dialogHeadingClass)},f="",s=[];switch(n(l.dialog,"dialog-",i),f=l.dialog.attr("id"),s=[f,l,d],t.push(s),l.dialog.hide().css({"z-index":d.zIndex}),l.wrapper.css({opacity:0}),d.dialogType){case"modal":l.wrapper.attr(o.r,"dialog");break;case"alert":l.wrapper.attr(o.r,"alertdialog")}n(l.heading,"dialog-heading-",i),l.wrapper.attr(o.aLab,l.heading.attr("id")),l.wrapper.attr(o.tbI,"0").attr(o.aHi,o.t),i+=1},a.open=function(i){var n=d(i),i=t[n][1].dialog,s=t[n][1].wrapper,p=i.find("a[href], area[href], button:enabled, input:enabled, textarea:enabled, select:enabled, optgroup:enabled, option:enabled, menuitem:enabled, fieldset:enabled");p={first:p.first(),last:p.last()},r=e(":focus"),i.show(),l(s,t[n][2]),e(window).on("resize",function(){l(s,t[n][2])}),s.fadeTo(t[n][2].fadeSpeed,1).attr(o.aHi,o.f),s.focus(),p.last.unbind("keydown").on("keydown",function(e){9===e.keyCode&&f(e)===!0&&(e.preventDefault(),p.first.focus())}),p.first.unbind("keydown").on("keydown",function(e){9!==e.keyCode||!e.shiftKey||e.ctrlKey||e.altKey||e.metaKey||(e.preventDefault(),p.last.focus())}),t[n][2].closeWithEsc&&e(window).unbind("keydown").one("keydown",function(e){27===e.keyCode&&f(e)===!0&&a.close(i)})},a.close=function(e){var a=d(e),e=t[a][1].dialog,i=t[a][1].wrapper;i.attr(o.aHi,o.t).fadeOut(t[a][2].fadeSpeed,function(){e.hide(),""!==r&&r.focus()})},a.remove=function(e){var a=d(e);t.splice(a,1),e.remove()},a.destroy=function(e){var a=d(e),i=t[a][1].wrapper;t.splice(a,1),i.removeAttr(o.r).removeAttr(o.aLi).removeAttr(o.tbI).removeAttr(o.aHi)},e.fn.ariaDialog=function(t){("object"==typeof t||"undefined"==typeof t)&&this.each(function(){a.init(t,e(this))}),"open"===t&&a.open(e(this)),"close"===t&&a.close(e(this)),"remove"===t&&this.each(function(){a.remove(e(this))}),"destroy"===t&&this.each(function(){a.destroy(e(this))})}}(jQuery);