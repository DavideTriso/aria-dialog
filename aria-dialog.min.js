!function(e){"use strict";function r(e,a,t){e.is("[id]")||e.attr("id",a+(t+1))}function n(e){return e.shiftKey||e.ctrlKey||e.altKey||e.metaKey?!1:!0}var a={},t=0,i="",o={r:"role",aHi:"aria-hidden",aLab:"aria-labelledby",tbI:"tabindex",aLi:"aria-live",t:"true",f:"false"};a.init=function(a,i){var n=e.extend({},e.fn.ariaDialog.defaultSettings,a),d={dialog:i,wrapper:i.find("."+n.dialogWrapperClass),container:i.find("."+n.dialogContainerClass),heading:i.find("."+n.dialogHeadingClass)},l="",s=[];switch(r(d.dialog,"dialog-",t),l=d.dialog.attr("id"),s=[l,d,n],i.data("dialogArray",s),d.dialog.hide().css({"z-index":n.zIndex}),d.wrapper.css({opacity:0}),n.dialogType){case"modal":d.wrapper.attr(o.r,"dialog");break;case"alert":d.wrapper.attr(o.r,"alertdialog")}d.container.attr(o.r,n.dialogContainerRole),r(d.heading,"dialog-heading-",t),d.wrapper.attr(o.aLab,d.heading.attr("id")),d.wrapper.attr(o.tbI,"0").attr(o.aHi,o.t),t+=1},a.open=function(t){var t=t.data("dialogArray")[1].dialog,r=t.data("dialogArray")[1].wrapper,d=t.data("dialogArray")[2],l=t.find("a[href], area[href], button:enabled, input:enabled, textarea:enabled, select:enabled, optgroup:enabled, option:enabled, menuitem:enabled, fieldset:enabled");l={first:l.first(),last:l.last()},i=e(":focus"),d.preventScroll&&e("body").css("overflow-y","hidden"),t.show(),r.fadeTo(d.fadeSpeed,1).attr(o.aHi,o.f).focus(),l.last.off("keydown").on("keydown",function(e){9===e.keyCode&&n(e)===!0&&(e.preventDefault(),l.first.focus())}),l.first.off("keydown").on("keydown",function(e){9!==e.keyCode||!e.shiftKey||e.ctrlKey||e.altKey||e.metaKey||(e.preventDefault(),l.last.focus())}),d.closeWithEsc&&e(window).off("keydown").one("keydown",function(e){27===e.keyCode&&n(e)===!0&&a.close(t)}),d.closeOnBgClick&&(t.on("click",function(e){a.close(t)}),r.on("click",function(e){e.stopPropagation()}))},a.close=function(a){var a=a.data("dialogArray")[1].dialog,t=a.data("dialogArray")[1].wrapper,r=a.data("dialogArray")[2];r.preventScroll&&e("body").css("overflow-y",""),t.attr(o.aHi,o.t).fadeOut(r.fadeSpeed,function(){a.hide(),""!==i&&i.focus()})},a.remove=function(e){e.remove()},a.destroy=function(e){var a=e.data("dialogArray")[1].wrapper;e.removeData("dialogArray"),a.removeAttr(o.r).removeAttr(o.aLi).removeAttr(o.tbI).removeAttr(o.aHi)},e.fn.ariaDialog=function(t){if("object"==typeof t||"undefined"==typeof t)return void this.each(function(){a.init(t,e(this))});switch(t){case"open":a.open(e(this));break;case"close":a.close(e(this));break;case"remove":this.each(function(){a.remove(e(this))});break;case"destroy":this.each(function(){a.destroy(e(this))})}},e.fn.ariaDialog.defaultSettings={dialogClass:"dialog",dialogWrapperClass:"dialog__wrapper",dialogContainerClass:"dialog__container",dialogHeadingClass:"dialog__heading",dialogType:"modal",dialogContainerRole:"document",closeWithEsc:!1,closeOnBgClick:!1,zIndex:100,fadeSpeed:100,preventScroll:!0}}(jQuery);