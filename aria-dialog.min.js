!function(e,t,n){"use strict";function l(e,t,n){return n=void 0!==n?n:"",e.is("[id]")||e.attr("id",t+n),e.attr("id")}function d(e){return e.shiftKey||e.ctrlKey||e.altKey||e.metaKey?!e.shiftKey||e.ctrlKey||e.altKey||e.metaKey?!1:"shift":"none"}function r(e){return e.find("a[href], area[href], button:enabled, input:enabled, textarea:enabled, select:enabled, optgroup:enabled, option:enabled, menuitem:enabled, fieldset:enabled")}function f(t,n){var s=this;s.settings=e.extend({},e.fn[i].defaultSettings,n),s.element=e(t),s.elementId=l(s.element,s.settings.dialogIdPrefix,a),s.elementState=!1,s.elements={wrapper:s.element.find("."+s.settings.wrapperClass),container:s.element.find("."+s.settings.containerClass),heading:s.element.find("."+s.settings.headingClass),mainMessage:s.element.find("."+s.settings.mainMessageClass).first()},s.init()}var i="ariaDialog",a=0,s={r:"role",aMo:"aria-modal",aHi:"aria-hidden",aLab:"aria-labelledby",aDes:"aria-describedby",tbI:"tabindex",aLi:"aria-live",t:"true",f:"false"},o=e(t);e.extend(f.prototype,{init:function(){var e=this,t=e.settings,i=e.element,d=e.elements,f=d.wrapper;switch(t.cssTransitions||(i.hide(),f.hide()),t.dialogType){case"modal":f.attr(s.r,"dialog").attr(s.aMo,s.t);break;case"alert":f.attr(s.r,"alertdialog").attr(s.aMo,s.t)}if(f.attr(s.aLab,l(d.heading,e.elementId+"__heading")).attr(s.aHi,s.t).attr(s.tbI,"-1"),1===d.mainMessage.length&&f.attr(s.aDes,l(d.mainMessage,e.elementId+"__main-message")),d.focussableElements=r(f),d.elementToFocus=f.find(t.setFocusOn),"object"!=typeof d.elementToFocus||1!==d.elementToFocus.length||1!==d.elementToFocus.closest(e.element).length||d.focussableElements.index(d.elementToFocus)<0)throw new Error("Check value of 'setFocusOn' option.");t.deepLinking&&(e.deepLinkingController(),o.on("hashchange",function(){n.location.hash==="#"+e.elementId?e.show():e.elementState&&e.deepLinkingController()})),a+=1},show:function(){var t=this,n=t.element,a=t.elements,l=a.wrapper,f=t.settings,c=r(l),h=c.first(),u=c.last();t.elementWithFocus=e(":focus"),f.cssTransitions||(n.show(),l.stop().fadeIn(f.fadeSpeed)),n.addClass(f.dialogOpenClass),l.addClass(f.wrapperOpenClass).attr(s.aHi,s.f),a.elementToFocus.focus(),h.on("keydown."+i,function(e){9===e.keyCode&&"shift"===d(e)&&(e.preventDefault(),u.focus())}),u.first().on("keydown."+i,function(e){9===e.keyCode&&"none"===d(e)&&(e.preventDefault(),h.focus())}),f.closeWithEsc&&o.on("keydown."+i,function(e){27===e.keyCode&&"none"===d(e)&&(f.deepLinking?t.updateHash():t.hide())}),f.closeOnBgClick&&(n.on("click."+i,function(){f.deepLinking?t.updateHash():t.hide()}),l.on("click."+i,function(e){e.stopPropagation()})),f.closeWithEsc&&o.on("keydown."+i,function(e){27===e.keyCode&&"none"===d(e)&&t.updateHash("hide")}),f.closeOnBgClick&&(n.on("click."+i,function(){t.updateHash("hide")}),l.on("click."+i,function(e){e.stopPropagation()})),t.elementState=!0},hide:function(){var e=this,t=e.element,n=e.elements.wrapper,a=e.settings;t.removeClass(a.dialogOpenClass),n.removeClass(a.wrapperOpenClass).attr(s.aHi,s.t),a.cssTransitions||n.stop().fadeOut(a.fadeSpeed,function(){t.hide()}),1===e.elementWithFocus.length&&e.elementWithFocus.focus(),o.off("keydown."+i),t.off("click."+i),n.off("click."+i),e.elementState=!1},updateHash:function(e){"show"===e?n.location.hash=this.elementId:n.location.hash=""},deepLinkingController:function(){var e=this;n.location.hash==="#"+e.elementId?e.show():e.elementState&&e.hide()},methodCaller:function(e){var t=this;if(t.settings.deepLinking)t.updateHash(e);else switch(e){case"show":t.show();break;case"hide":t.elementState&&t.hide()}}}),e.fn[i]=function(t){return this.each(function(){e.data(this,"plugin_"+i)||"object"!=typeof t&&"undefined"!=typeof t?"string"==typeof t&&e.data(this,"plugin_"+i).methodCaller(t):e.data(this,"plugin_"+i,new f(this,t))})},e.fn[i].defaultSettings={dialogIdPrefix:"dialog--",dialogClass:"dialog",wrapperClass:"dialog__wrapper",containerClass:"dialog__container",headingClass:"dialog__heading",mainMessageClass:"dialog__main-message",dialogOpenClass:"dialog_open",wrapperOpenClass:"dialog__wrapper_open",dialogType:"modal",containerRole:"document",closeWithEsc:!0,closeOnBgClick:!0,fadeSpeed:600,cssTransitions:!1,deepLinking:!1,setFocusOn:"button:first-child"}}(jQuery,window,document);